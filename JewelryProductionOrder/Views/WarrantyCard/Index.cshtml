@model List<WarrantyCard>
<head>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<form method="post">
    <div>
        <div>
            <h2>View Warranty Card</h2>
            <hr />
        </div>
        <table class="table table-bordered table-striped">
            <thead>
                <tr>
                    <th>Id</th>
                    <th>Jewelry's Name</th>
                    <th>Customer's Name</th>
                    <th>Issued Date</th>
                    <th>Expired Date</th>
                    

                    
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var obj in Model.OrderBy(u => u.Id)) 
                
                {
                <tr>
                    <td>@obj.Id</td>
                    <td>@obj.Jewelry.Name</td>
                    <td>@obj.Customer.Name</td>
                    <td><input disabled asp-for="@obj.CreatedAt" type="date" class="border-0"/></td>
                        <td><input disabled asp-for="@obj.ExpiredAt" type="date" class="border-0" /></td>
                 
                    
                    <td><div class="w-75 btn-group" role="group">
                                <a asp-controller="WarrantyCard" asp-action="Edit" asp-route-id="@obj.Id"  class="btn btn-primary mx-2">
                                <i class="bi bi-pencil"></i> Edit
                                </a>
                                <a asp-controller="WarrantyCard"  asp-route-id="@obj.Id" class="btn btn-danger mx-2" onclick="confirmDelete(@obj.Id)">
                                    <i class="bi bi-trash"></i> Delete
                                </a>
                                @* <button onclick="confirmDelete(@obj.Id)" class="btn-danger mx-2">Delete</button> *@
                    </div></td>
                </tr>
                }
              
            </tbody>
        </table>
    </div>

    <div class="col-6 col-md-3">
        <a asp-controller="Home" asp-action="Index" class="btn btn-outline-primary form-control">
            Back 
        </a>
    </div>
</form>
<script>
    function confirmDelete(id) {
        Swal.fire({
            title: 'Are you sure?',
            text: "You won't be able to revert this!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Yes, delete it!'
        }).then((result) => {
            if (result.isConfirmed) {
                // Perform the delete action
                deleteItem(id);
            }
        });
    }
    function deleteItem(id) {
        // Perform the actual delete operation here
        // For example, an AJAX request to the server to delete the item
        $.ajax({
            url: '/WarrantyCard/DeletePost' + id,
            type: 'DELETE',
            success: function (result) {
                Swal.fire(
                    'Deleted!',
                    'Your item has been deleted.',
                    'success'
                );
                // Optionally, refresh the page or update the UI
                location.reload();
            },
            error: function (err) {
                Swal.fire(
                    'Error!',
                    'There was an error deleting the item.',
                    'error'
                );
            }
        });
    }

</script>
@section Scripts
{
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}
