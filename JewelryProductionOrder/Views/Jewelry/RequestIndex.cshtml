@model List<Jewelry>
<div>
	<div>
		<h2>View Jewelry</h2>
		<hr />
	</div>
	<table class="table table-bordered table-striped fs-6 fw-normal">
		<thead>
			<tr class="fw-normal">
				<th>Id</th>
				@* <th>Created At</th> *@
				<th>Name</th>
				<th>Description</th>
				@* <th>Status</th> *@
				<th>Materials</th>
				<th>Quotation</th>
				<th>Design</th>
				<th>Manufacture</th>
				@* <th>Deliver</th> *@
				@if (User.IsInRole(SD.Role_Sales))
				{
					<th>Edit</th>
				}
				<th>Warranty Card</th>
				@* <th width="13%">Image</th>
				<th>Customer</th>
				<th>Staffs</th>
				<th>Production Request</th>
				<th>Warranty Card</th> *@
			</tr>
		</thead>
		<tbody>
			@foreach (var obj in Model.OrderByDescending(u => u.CreatedAt))
			{
				<tr>
					<td>@obj.Id</td>
					@* <td>@obj.CreatedAt</td> *@
					<td>@obj.Name</td>
					<td>@obj.Description</td>
					@* <td>@obj.Status</td> *@
					@* <td>@obj?.Customer?.Name</td> *@

					@if (obj.MaterialSet is not null)
					{
						<td><a asp-controller="MaterialSet" asp-action="Index" asp-route-jId="@obj.Id" asp-route-id="@obj.MaterialSet.Id" class="btn btn-primary btn-sm">View</a></td>
					}
					else if (User.IsInRole(SD.Role_Sales))
					{
						<td><a asp-controller="MaterialSet" asp-action="Upsert" asp-route-jId="@obj.Id" class="btn btn-primary btn-sm" asp-route-redirectRequest="@obj.ProductionRequestId">Create</a></td>
					}
					else
					{
						<td></td>
					}

					@if (@obj.QuotationRequests.Count != 0)
					{
						<td><a asp-controller="QuotationRequest" asp-action="ViewAll" asp-route-jId="@obj.Id" class="btn btn-primary btn-sm">View</a></td>
					}
					else if (User.IsInRole(SD.Role_Sales))
					{
						<td><a asp-controller="QuotationRequest" asp-action="Create" asp-route-jId="@obj.Id" class="btn btn-primary btn-sm" asp-route-redirectRequest="@obj.ProductionRequestId">Create</a></td>
					}
					else
					{
						<td></td>
					}

					@if (@obj.Status != SD.StatusQuotationApproved && obj.Status != SD.DesignApproved)
					{
						<td></td>
					}
					else if (@obj.JewelryDesigns.Count != 0)
					{
						<td><a asp-controller="JewelryDesign" asp-action="Details" asp-route-jId="@obj.Id" class="btn btn-primary btn-sm">View</a></td>
					}
					else if (User.IsInRole(SD.Role_Design) && obj.Status == SD.StatusQuotationApproved)
					{
						<td>
							<a asp-controller="JewelryDesign" asp-action="Create" asp-route-jId="@obj.Id"
							   asp-route-redirectRequest="@obj.ProductionRequestId"
							   class="btn btn-primary btn-sm">Create</a>
						</td>
					}
					else
					{
						<td></td>
					}

					@if (User.IsInRole(SD.Role_Production) && obj.Status == SD.DesignApproved)
					{
						<td><a asp-controller="Jewelry" asp-action="Manufacture" asp-route-jId="@obj.Id" class="btn btn-primary btn-sm" asp-route-redirectRequest="@obj.ProductionRequestId">Manufacture</a></td>
					}
					@if (User.IsInRole(SD.Role_Production) && obj.Status == SD.StatusManufaturing)
					{
						<td><a asp-controller="Jewelry" asp-action="Complete" asp-route-jId="@obj.Id" class="btn btn-primary btn-sm" asp-route-redirectRequest="@obj.ProductionRequestId">Complete</a></td>
					}
					else
					{
						<td></td>
					}

					@if (User.IsInRole(SD.Role_Sales))
					{
						<td>
							<a asp-controller="Jewelry" asp-action="Edit" asp-route-id="@obj.Id" class="btn btn-primary btn-sm" asp-route-redirectRequest="@obj.ProductionRequestId">Edit</a>
						</td>
					}

					@if (@obj.WarrantyCard is not null)
					{
						<td><a asp-controller="WarrantyCard" asp-action="Details" asp-route-id="@obj.Id" class="btn btn-primary btn-sm" asp-route-redirectRequest="@obj.ProductionRequestId">View</a></td>
					}
					else if (User.IsInRole(SD.Role_Sales))
					{
						<td><a asp-controller="WarrantyCard" asp-action="Create" asp-route-jid="@obj.Id" class="btn btn-primary btn-sm" asp-route-redirectRequest="@obj.ProductionRequestId">Create</a></td>
					}
					else
					{
						<td></td>
					}
				</tr>
			}
		</tbody>
	</table>

	@* 		@if (Model.Count < Model.ElementAt(0).ProductionRequest.Quantity)
	{
	<div>

	<a asp-controller="Jewelry" asp-action="Create" asp-route-reqId="@Model.ElementAt(0).ProductionRequest.Id" class="btn btn-outline-primary form-control">Create next Jewelry</a>
	</div>
	} *@

</div>
<!-- <div asp-validation-summary="All"></div> -->
